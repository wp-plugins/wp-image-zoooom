/*! Image Zoooom - v0.1.0 - 2015-05-26
* Copyright (c) 2015 Diana Burduja; Licensed MIT license */
!function(a,b,c,d){"use strict";var e={init:function(b,c){var d=this;d.elem=c,d.$elem=a(c),d.options=b,d.img_big={src:d.$elem.data("zoom-image")?d.$elem.data("zoom-image"):d.$elem.attr("src")},d.img_small={src:d.$elem.attr("src"),width:d.$elem.width(),height:d.$elem.height(),offset:d.$elem.offset()},d.ratio={width:1,height:1},d.zw={height:d.options.zoomWindowHeight,width:d.options.zoomWindowWidth},d.lens={height:d.options.lensSize,width:d.options.lensSize},d.options.tint&&(d.options.lensColour="none",d.options.lensOpacity="1"),"inner"===d.options.zoomType&&(d.options.showLens=!1),d.$elem.parent().removeAttr("title").removeAttr("alt"),setTimeout(function(){var a=new Image;a.onload=function(){d.img_big.width=a.width,d.img_big.height=a.height,0===d.img_small.height&&(d.img_small.height=a.height*d.img_small.width/a.width),0===d.img_small.width&&(d.img_small.width=a.width*d.img_small.height/a.height),d.startZoom()},a.src=d.img_big.src},1)},buildZoomContainer:function(){var b=this;b.zoomContainer=a("<div />").css({"-webkit-transform":"translateZ(0)",position:"absolute",left:b.img_small.offset.left+"px",top:b.img_small.offset.top+"px",height:b.img_small.height+"px",width:b.img_small.width+"px"}).appendTo("body")},buildZoomLens:function(){var b=this;b.options.containLensZoom&&b.zoomContainer.css("overflow","hidden");var c={"background-position":"0px 0px","float":"left",display:"none",border:b.options.borderSize+"px solid "+b.options.borderColour,width:b.options.lensSize+"px",height:b.options.lensSize+"px","border-radius":b.options.borderRadius+"px",cursor:b.options.cursor,"background-repeat":"no-repeat",position:"absolute",overflow:"hidden","z-index":"999"};if(b.options.tint===!0&&(c["-webkit-transform"]="translateZ(0)",c.opacity=b.options.lensOpacity,c["-ms-filter"]="progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*b.options.lensOpacity+")",c.filter="alpha(opacity= "+100*b.options.lensOpacity+")"),"round"===b.options.lensShape){var d=b.options.lensSize/2+b.options.borderSize+"px";c["-webkit-border-radius"]=d,c["-moz-border-radius"]=d,c["border-radius"]=d}b.zoomLens=a("<div />").addClass("zoomLens").css(c).appendTo(b.zoomContainer).click(function(){b.$elem.trigger("click")})},buildZoomWindow:function(){var b=this;b.lens.height=b.zw.height/b.ratio.height,b.img_big.height<b.zw.height&&(b.lens.height=b.img_small.height),b.lens.width=b.zw.width/b.ratio.width,b.img_big.width<b.zw.width&&(b.lens.width=b.img_small.width);var c={"background-position":"0px 0px",display:"none",overflow:"hidden","z-index":"999","-webkit-transform":"translateZ(0)",opacity:b.options.lensOpacity,"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*b.options.lensOpacity+")",filter:"alpha(opacity= "+100*b.options.lensOpacity+")",zoom:1,width:b.lens.width+"px",height:b.lens.height+"px","background-color":b.options.lensColour,cursor:b.options.cursor,"border-radius":b.options.borderRadius+"px",border:b.options.lensBorderSize+"px solid "+b.options.lensBorderColour,"background-repeat":"no-repeat",position:"absolute"};b.zoomLens=a("<div />").addClass("zoomLens").css(c).appendTo(b.zoomContainer).click(function(){b.$elem.trigger("click")});var d={overflow:"hidden","background-position":"0px 0px","text-align":"center","background-color":b.options.zoomWindowBgColour,width:b.options.zoomWindowWidth+"px",height:b.options.zoomWindowHeight+"px","float":"left","border-radius":b.options.borderRadius+"px","background-size":b.img_big.width/b.currentZoomLevel+"px "+b.img_big.height/b.currentZoomLevel+"px",display:"none","z-index":"999",border:b.options.borderSize+"px solid "+b.options.borderColour,"background-repeat":"no-repeat",position:"absolute"};if(b.options.zoomWindowShadow>0){var e=2*b.options.zoomWindowShadow+"px "+2*b.options.zoomWindowShadow+"px "+b.options.zoomWindowShadow+"px #ccc";d["box-shadow"]=e,d["-moz-box-shadow"]=e,d["-webkit-box-shadow"]=e,d["-khtml-box-shadow"]=e}return d},buildZoomInner:function(){var a=this,b=a.$elem.css("border-left-width"),c={overflow:"hidden","margin-left":b,"margin-top":b,"background-position":"0px 0px",width:a.img_small.width+"px",height:a.img_small.height+"px","float":"left","border-radius":a.options.borderRadius+"px",display:"none",cursor:a.options.cursor,"background-repeat":"no-repeat",position:"absolute","z-index":"999"};return c},buildTint:function(){var b=this;if(b.options.tint){var c={display:"block",position:"absolute","background-color":b.options.tintColour,filter:"alpha(opacity=0)",border:"none",opacity:0,"z-index":250,width:b.img_small.width+"px",height:b.img_small.height+"px"};b.tintContainer=a("<div />").addClass("tintContainer"),b.zoomTint=a("<div />").addClass("zoomTint").css(c),b.zoomLens.wrap(b.tintContainer),b.zoomLens.after(b.zoomTint);var d={position:"absolute",left:"0px",top:"0px","z-index":"250",opacity:"0","max-width":"none",width:b.img_small.width+"px",height:b.img_small.height+"px"};"window"===b.options.zoomType&&(d.opacity=1),b.zoomTintImage=a("<img />").css(d).attr("src",b.img_big.src).appendTo(b.zoomLens).click(function(){b.$elem.trigger("click")})}},startZoom:function(){var b=this;if(b.isWindowActive=!1,b.isLensActive=!1,b.isTintActive=!1,b.zoomLock=1,b.scrollingLock=!1,b.changeBgSize=!1,b.currentZoomLevel=b.options.zoomLevel,b.ratio={width:b.img_big.width/b.img_small.width/b.currentZoomLevel,height:b.img_big.height/b.img_small.height/b.currentZoomLevel},b.ratio.height<1||b.ratio.width<1)return!1;b.img_small.offset=b.$elem.offset(),b.buildZoomContainer();var c={};switch(b.options.zoomType){case"lens":b.buildZoomLens(),b.buildTint();break;case"window":c=b.buildZoomWindow(),b.buildTint();break;case"inner":c=b.buildZoomInner()}var d="body";isNaN(b.options.zoomWindowPosition)||(d=b.zoomContainer),b.zoomWindow=a("<div />").addClass("zoomWindow").css(c).appendTo(d).click(function(){b.$elem.trigger("click")}),b.zoomWindowContainer=a("<div/>").addClass("zoomWindowContainer").css("width",b.options.zoomWindowWidth),b.zoomWindow.wrap(b.zoomWindowContainer);var e={backgroundImage:"url('"+b.img_big.src+"')"};"lens"===b.options.zoomType?b.zoomLens.css(e):b.zoomWindow.css(e),b.registerTouchEvents(),b.registerMouseEvents(),b.zoomContainer.add(b.$elem).mouseenter(function(){b.setElements(!0)}).mouseleave(function(){b.scrollLock||b.setElements(!1)}),"inner"!==b.options.zoomType?b.zoomWindow.mouseenter(function(){b.setElements(!1)}):b.showZoomWindow(!1)},registerTouchEvents:function(){var a=this,b=function(){a.showZoomWindow(!1),a.showLens(!1),a.showTint(!1)},c=function(b){b.preventDefault();var c=b.originalEvent.touches[0]||b.originalEvent.changedTouches[0];a.mouse={left:parseInt(b.pageX-a.img_small.offset.left),top:parseInt(b.pageY-a.img_small.offset.top)},a.setPosition(c)};a.$elem.bind("touchmove",c),a.$elem.bind("touchend",b),a.zoomContainer.bind("touchmove",c),a.zoomContainer.bind("touchend",b),a.zoomLens!==d&&(a.zoomLens.bind("touchmove",c),a.zoomLens.bind("touchend",b)),"inner"===a.options.zoomType&&a.showZoomWindow(!0)},registerMouseEvents:function(){var a=this,b=function(b){a.mouse={left:parseInt(b.pageX-a.img_small.offset.left),top:parseInt(b.pageY-a.img_small.offset.top)},(a.lastX!==b.clientX||a.lastY!==b.clientY)&&(a.setPosition(b),a.currentLoc=b),a.lastX=b.clientX,a.lastY=b.clientY},c=function(c){a.setElements(!0),b(c)};a.$elem.bind("mousemove",c),a.zoomContainer.bind("mousemove",c),"inner"===a.options.zoomType?a.zoomWindow.bind("mousemove",b):(a.zoomLens.bind("mousemove",b),a.options.tint&&a.zoomTint.bind("mousemove",b))},registerScrollZoom:function(){var b=this;1!==b.options.zoomLevel&&b.changeZoomLevel(b.currentZoomLevel);var c=2*b.options.scrollZoomIncrement;b.options.minZoomLevel&&(c=b.options.minZoomLevel);var d=function(d){b.scrollLock=!0,clearTimeout(a.data(this,"timer")),a.data(this,"timer",setTimeout(function(){b.scrollLock=!1},250));var e=d.originalEvent.wheelDelta||-1*d.originalEvent.detail;d.stopImmediatePropagation(),d.stopPropagation(),d.preventDefault();var f=0;return b.currentZoomLevel=parseFloat(b.currentZoomLevel),e>0?b.currentZoomLevel>=c&&(f=b.currentZoomLevel-b.options.scrollZoomIncrement):f=b.currentZoomLevel+b.options.scrollZoomIncrement,b.changeZoomLevel(f),!1};b.options.scrollZoom&&b.zoomContainer.add(b.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",d)},setElements:function(a){var b=this;return b.options.zoomEnabled?void(b.isWindowSet&&(b.showZoomWindow(a),b.showLens(a),b.showTint(a))):!1},setPosition:function(a){var b=this;if(!b.options.zoomEnabled)return!1;if(b.options.tint&&"inner"!==b.options.zoomType&&b.zoomTint.css({top:0,left:0}),b.options.responsive&&!b.options.scrollZoom&&b.options.showLens)if("lens"===b.options.zoomType)b.zoomLens.css({width:b.options.lensSize+"px",height:b.options.lensSize+"px"});else{var c=b.options.zoomWindowHeight/b.ratio.height;b.img_small.height<b.options.zoomWindowWidth/b.ratio.width&&(c=b.img_small.height);var d=b.options.zoomWindowWidth/b.ratio.width;b.options.zoomWindowWidth<b.options.zoomWindowWidth&&(d=b.img_small.width),b.zoomLens.css({width:d+"px",height:c+"px"}),b.options.tint&&b.zoomTintImage.css({width:b.img_small.width+"px",height:b.img_small.height+"px"})}b.zoomContainer.css({top:b.img_small.offset.top,left:b.img_small.offset.left});var e={top:!1,bottom:!1,left:!1,right:!1};if("window"===b.options.zoomType&&(e.height=b.zoomLens.height()/2,e.width=b.zoomLens.width()/2),"inner"===b.options.zoomType&&(e.height=b.img_small.height/2/b.ratio.height,e.width=b.img_small.width/2/b.ratio.width),e.top=b.mouse.top<e.height,e.bottom=b.mouse.top>b.img_small.height-e.height-2*b.options.lensBorderSize,e.left=b.mouse.left<e.width,e.right=b.mouse.left>b.img_small.width-e.width-2*b.options.lensBorderSize,b.bound=e,b.mouse.left<=0||b.mouse.top<0||b.mouse.left>b.img_small.width||b.mouse.top>b.img_small.height)return void b.setElements(!1);var f=0,g=0;switch(b.options.showLens&&(f=b.mouse.left-b.zoomLens.width()/2,g=b.mouse.top-b.zoomLens.height()/2),e.top&&(g=0),e.left&&(b.windowLeftPos=0,f=0,b.tintpos=0),b.options.zoomType){case"window":e.bottom&&(g=Math.max(b.img_small.height-b.zoomLens.height()-2*b.options.lensBorderSize,0)),e.right&&(f=b.img_small.width-b.zoomLens.width()-2*b.options.lensBorderSize),b.options.tint&&b.setTintPosition(a);break;case"inner":e.bottom&&(g=Math.max(b.img_small.height-2*b.options.lensBorderSize,0)),e.right&&(f=2*-b.options.lensBorderSize);break;case"lens":b.windowLeftPos=b.zoomLens.width()/2-b.mouse.left*b.ratio.width,b.windowTopPos=b.zoomLens.height()/2-b.mouse.top*b.ratio.height,b.zoomLens.css({backgroundPosition:b.windowLeftPos+"px "+b.windowTopPos+"px"}),b.changeBackgroundSize(),b.options.tint&&b.setTintPosition(a)}b.setWindowPosition(a),b.options.showLens&&(b.fullwidth&&"lens"!==b.options.zoomType&&(f=0),b.zoomLens.css({left:f+"px",top:g+"px"}))},showZoomWindow:function(a){var b=this;b.isWindowActive!==a&&(b.fadeEffect(b.zoomWindow,a,b.options.zoomWindowFadeIn,b.options.zoomWindowFadeOut),b.isWindowActive=a)},showLens:function(a){var b=this;b.options.showLens&&b.isLensActive!==a&&(b.fadeEffect(b.zoomLens,a,b.options.lensFadeIn,b.options.lensFadeOut),b.isLensActive=a)},showTint:function(a){var b=this;b.options.tint&&"inner"!==b.options.zoomType&&b.isTintActive!==a&&(a&&b.zoomTint.css({opacity:b.options.tintOpacity}).animate(),b.fadeEffect(b.zoomTint,a,"slow","slow"),b.isTintActive=a)},fadeEffect:function(a,b,c,d){b?c?a.stop(!0,!0,!1).fadeIn(c):a.show():d?a.stop(!0,!0).fadeOut(d):a.hide()},setWindowPosition:function(b){var c=this,d=c.options.zoomWindowOffety,e=c.img_small.width;if(isNaN(c.options.zoomWindowPosition)){var f=a("#"+c.options.zoomWindowPosition).offset();d=f.top,e=f.left}else{switch(c.options.zoomWindowPosition){case 4:case 5:case 6:case 7:case 8:d=c.img_small.height;break;case 12:case 13:case 14:case 15:case 16:d=-c.zoomWindow.height()-2*c.options.borderSize;break;case 1:case 11:d=c.options.zoomWindowOffety;break;case 2:case 10:d=c.img_small.height/2-c.options.zoomWindowHeight/2;break;case 3:case 9:d=c.img_small.height-c.zoomWindow.height()-2*c.options.borderSize}switch(c.options.zoomWindowPosition){case 1:case 2:case 3:case 4:case 16:e=c.img_small.width;break;case 8:case 9:case 10:case 11:case 12:e=-c.zoomWindow.width()-2*c.options.borderSize;break;case 5:case 15:e=c.img_small.width-c.zoomWindow.width()-2*c.options.borderSize;break;case 6:case 14:e=c.img_small.width/2-c.options.zoomWindowWidth/2-2*c.options.borderSize;break;case 7:case 13:e=0}}c.isWindowSet=!0,d+=c.options.zoomWindowOffety,e+=c.options.zoomWindowOffetx,c.zoomWindow.css({top:d,left:e}),"inner"===c.options.zoomType&&c.zoomWindow.css({top:0,left:0}),c.windowLeftPos=c.zoomWindow.width()/2-c.mouse.left*c.ratio.width,c.windowTopPos=c.zoomWindow.height()/2-c.mouse.top*c.ratio.height,c.bound.top&&(c.windowTopPos=0),c.bound.left&&(c.windowLeftPos=0),c.bound.bottom&&(c.windowTopPos=-1*(c.img_big.height/c.currentZoomLevel-c.zoomWindow.height())),c.bound.right&&(c.windowLeftPos=-1*(c.img_big.width/c.currentZoomLevel-c.zoomWindow.width())),c.fullheight&&(c.windowTopPos=0),c.fullwidth&&(c.windowLeftPos=0),("window"===c.options.zoomType||"inner"===c.options.zoomType)&&(1===c.zoomLock&&(c.ratio.width<=1&&(c.windowLeftPos=0),c.ratio.height<=1&&(c.windowTopPos=0)),c.img_big.height<c.options.zoomWindowHeight&&(c.windowTopPos=0),c.img_big.width<c.options.zoomWindowWidth&&(c.windowLeftPos=0),c.options.easingAmount>0?c.easingEffect(b):(c.changeBackgroundSize(),c.zoomWindow.css({backgroundPosition:c.windowLeftPos+"px "+c.windowTopPos+"px"})))},changeBackgroundSize:function(){var a=this;if(a.changeBgSize){var b=a.newvaluewidth;a.img_small.height>a.img_small.width&&(b=a.newvalueheight);var c={"background-size":a.img_big.width/a.newvalue+"px "+a.img_big.height/a.newvalue+"px"};"lens"===a.options.zoomType&&a.zoomLens.css(c),a.zoomWindow.css(c),a.changeBgSize=!1}},easingEffect:function(){var a=this;a.xp||(a.xp=0),a.yp||(a.yp=0),a.loop||(a.loop=setInterval(function(){a.xp+=(a.windowLeftPos-a.xp)/a.options.easingAmount,a.yp+=(a.windowTopPos-a.yp)/a.options.easingAmount,a.scrollingLock?(clearInterval(a.loop),a.xp=a.zoomWindow.width()/2-a.mouse.left*a.ratio.width,a.yp=a.zoomWindow.height()/2-a.mouse.top*a.ratio.height,a.changeBackgroundSize(),a.zoomWindow.css({backgroundPosition:a.windowLeftPos+"px "+a.windowTopPos+"px"}),a.scrollingLock=!1,a.loop=!1):(a.changeBackgroundSize(),a.zoomWindow.css({backgroundPosition:a.xp+"px "+a.yp+"px"}))},16))},setTintPosition:function(){var a=this;a.options.tint&&(a.tintpos=a.zoomLens.width()/2-a.mouse.left,a.tintposy=a.zoomLens.height()/2-a.mouse.top,(a.bound.top||a.fullheight)&&(a.tintposy=0),(a.bound.left||a.fullwidth)&&(a.tintpos=0),a.bound.bottom&&(a.tintposy=-1*(a.img_small.height-a.zoomLens.height()-2*a.options.lensBorderSize)),a.bound.right&&(a.tintpos=-1*(a.img_small.width-a.zoomLens.width()-2*a.options.lensBorderSize)),a.zoomTintImage.css({left:a.tintpos+"px",top:a.tintposy+"px"}))},changeZoomLevel:function(a){var b=this;b.scrollingLock=!0;var c=parseFloat(a).toFixed(2);b.newvalue=c;var d=b.img_big.height/b.zw.height,e=b.img_big.width/b.zw.width;"inner"!==b.options.zoomType?(c>=d?(b.newvalueheight=d,b.fullheight=!0):(b.newvalueheight=c,b.fullheight=!1),b.ratio.height=b.img_big.height/b.newvalueheight/b.img_small.height,c>=e?(b.newvaluewidth=e,b.fullwidth=!0):(b.newvaluewidth=c,b.fullwidth=!1),b.ratio.width=b.img_big.width/b.newvaluewidth/b.img_small.width):(d=parseFloat(b.img_big.height/b.img_small.height).toFixed(2),e=parseFloat(b.img_big.width/b.img_small.width).toFixed(2),c=Math.min(d,e,c),b.newvalueheight=c,b.ratio.height=b.img_big.height/c/b.img_small.height,b.fullheight=c>=d?!0:!1,b.ratio.width=b.img_big.width/c/b.img_small.width,c>=e?(b.newvaluewidth=e,b.fullwidth=!0):(b.newvaluewidth=c,b.fullwidth=!1));var f=!0;"inner"===b.options.zoomType&&b.newvaluewidth>e&&(f=!1,b.fullheight=!0,b.fullwidth=!0),f&&(b.zoomLock=0,b.changeZoom=!0,b.options.zoomWindowHeight/b.ratio.height<=b.img_small.height&&(b.currentZoomLevel=b.newvalueheight,b.changeBgSize=!0,"window"===b.options.zoomType&&b.zoomLens.css({height:String(b.options.zoomWindowHeight/b.ratio.height)+"px"})),b.options.zoomWindowWidth/b.ratio.width<=b.img_small.width&&("inner"!==b.options.zoomType&&b.newvaluewidth>b.newvalueheight&&(b.currentZoomLevel=b.newvaluewidth),b.changeBgSize=!0,"window"===b.options.zoomType&&b.zoomLens.css({width:String(b.options.zoomWindowWidth/b.ratio.width)+"px"})),"inner"===b.options.zoomType&&(b.changeBgSize=!0,b.img_small.width!==b.img_small.height&&(b.currentZoomLevel=b.newvaluewidth))),b.setPosition(b.currentLoc)}};a.fn.image_zoom=function(b){return this.each(function(){function c(){}var d=a.extend(!0,{},a.fn.image_zoom.options,b);c.prototype=e;var f=new c;f.init(d,this)})},a.fn.image_zoom.options={zoomEnabled:!0,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.1,minZoomLevel:!1,maxZoomLevel:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:360,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",zoomWindowShadow:4,lensFadeIn:!1,lensFadeOut:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",borderRadius:0,lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:.4,cursor:"default",responsive:!0,onComplete:a.noop}}(jQuery,window,document);